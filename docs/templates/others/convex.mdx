---
title: Convex
description: Integrate Stack Auth with Convex
---

This guide shows how to integrate Stack Auth with Convex

### Setup

First create a new Next.js project with convex installed:
<Tabs defaultValue="wizard">
  <TabsList>
    <TabsTrigger value="wizard">Setup wizard (recommended)</TabsTrigger>
    <TabsTrigger value="manual">Manual installation</TabsTrigger>
  </TabsList>
  <TabsContent value="wizard">
    <Steps>
      <Step>
      ### Run installation wizard
      </Step>
      Run Stack's installation wizard with the following command:

      ```bash title="Terminal"
      npx create-next-app --example convex stack-convex
      ```
    </Steps>
  </TabsContent>
  <TabsContent value="manual">
    <Steps>
      <Step>
      ### Manual installation
      </Step>
      Run the following command to create a new Next.js project with convex installed:

      ```bash title="Terminal"
      npx create-next-app --example convex stack-convex
      ```
    </Steps>
  </TabsContent>
</Tabs>

Next install Stack Auth:

```bash title="Terminal"
cd stack-convex
npx @stackframe/init-stack@latest
```

Next create a new file in convex/auth.config.ts with the following code:

```typescript title="convex/auth.config.ts"
import { getConvexProviderConfig } from "@stackframe/convex";

export default {
  providers: [
    ...getConvexProvidersConfig(),
  ],
}
```

### Setup a new Next.js project

Now let's create a new Next.js project and install Stack Auth and Supabase client. (more details on [Next.js setup](https://nextjs.org/docs/getting-started/installation), [Stack Auth setup](../getting-started/setup.mdx), and [Supabase setup](https://supabase.com/docs/guides/getting-started/quickstarts/nextjs))

```bash title="Terminal"
npx create-next-app@latest stack-convex
cd stack-convex
npx @stackframe/init-stack@latest
```

Now copy the environment variables from the Supabase dashboard to the `.env.local` file: 
- `NEXT_PUBLIC_SUPABASE_URL`
- `NEXT_PUBLIC_SUPABASE_ANON_KEY`
- `SUPABASE_JWT_SECRET`

Copy environment variables from the Stack dashboard to the `.env.local` file.
- `NEXT_PUBLIC_STACK_PROJECT_ID`
- `NEXT_PUBLIC_STACK_PUBLISHABLE_CLIENT_KEY`
- `STACK_SECRET_SERVER_KEY`


Next update stack/client.ts with the following code:

```typescript title="stack/client.ts"
import { convexClient } from "../convex/_generated/client";

export const stackClientApp = new StackClientApp({
  projectId: process.env.NEXT_PUBLIC_STACK_PROJECT_ID,
  publishableClientKey: process.env.NEXT_PUBLIC_STACK_PUBLISHABLE_CLIENT_KEY,
  tokenStore: "nextjs-cookie",
  integrations: {
    convex: {
      client: convexClient,
    },
  },
});
```

You can find the full example [here on GitHub](https://github.com/stack-auth/stack-auth/tree/main/examples/supabase).
